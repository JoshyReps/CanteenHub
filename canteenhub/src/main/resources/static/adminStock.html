<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@300&f[]=switzer@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.css"/>
    <link rel="stylesheet" href="public/style.css">
</head>

<body>

<nav id="main-nav-bar" class="flex-center">
    <a href="/" class="nav-container" id="nav-con-1">
        <img src="public/imgs/logos/logo-01.png" alt="">
    </a>
    <div class="nav-container flex-center" id="nav-con-2">
        <a href="menu.html" class="nav-links">Menu</a>
        <a href="social.html" class="nav-links">Community</a>
        <a href="#main-footer" class="nav-links">Contact</a>
    </div>
    <div class="nav-container flex-center" id="nav-con-3">
        <button class="nav-btn">
            <img src="public/imgs/icons/profile-icon.png" alt="">
        </button>
        <button class="nav-btn" id="order-btn">
            <p class="nav-order-count">0</p>
            <img src="public/imgs/icons/cart-icon.png" alt="">
        </button>
        <a href="register.html" id="sign-up-btn" class="flex-center">
            <img src="public/imgs/icons/sign-up-icon.png" alt="">
            <h4>Sign Up</h4>
        </a>
    </div>
</nav>

<div id="admin-main" class="flex-center">

    <div id="admin-side-bar" class="flex-center">
        <h1>Admin Controls</h1>
        <a href="adminStock.html" class="admin-link-con flex-center">
            <img src="public/imgs/icons/box.png" alt="">
            <h3>Manage Stocks</h3>
        </a>
        <a href="admin.html" class="admin-link-con flex-center">
            <img src="public/imgs/icons/trend.png" alt="">
            <h3>Manage Orders</h3>
        </a>

        <!-- <div class="flex-center admin-side-footer">
            <h3>@2025 CanteenHub</h3>
        </div> -->
    </div>


    <div id="admin-stock">

        <div class="stock-card">
            <div class="stock-img flex-center">
                <img src="public/imgs/items/placeholder.png" alt="">
            </div>
            <div class="stock-text-con flex-center">
                <div class="stock-details">
                    <div class="stock-name">
                        <h5>Sinangag Premium</h5>
                    </div>
                    <div class="stock-type">
                        <h6>Drinks</h6>
                    </div>
                </div>
                <div class="stock-price">
                    <p>₱100.00</p>
                </div>
            </div>
            <div class="stock-btn flex-center">
                <button>Stocked</button>
            </div>
        </div>


        <div class="stock-card">
            <div class="stock-img flex-center">
                <img src="public/imgs/items/placeholder.png" alt="">
            </div>
            <div class="stock-text-con flex-center">
                <div class="stock-details">
                    <div class="stock-name">
                        <h5>Sinangag Premium</h5>
                    </div>
                    <div class="stock-type">
                        <h6>Drinks</h6>
                    </div>
                </div>
                <div class="stock-price">
                    <p>₱100.00</p>
                </div>
            </div>
            <div class="stock-btn flex-center">
                <button>Stocked</button>
            </div>
        </div>



        <div class="stock-card">
            <div class="stock-img flex-center">
                <img src="public/imgs/items/placeholder.png" alt="">
            </div>
            <div class="stock-text-con flex-center">
                <div class="stock-details">
                    <div class="stock-name">
                        <h5>Sinangag Premium</h5>
                    </div>
                    <div class="stock-type">
                        <h6>Drinks</h6>
                    </div>
                </div>
                <div class="stock-price">
                    <p>₱100.00</p>
                </div>
            </div>
            <div class="stock-btn flex-center">
                <button>Stocked</button>
            </div>
        </div>




        <div class="stock-card">
            <div class="stock-img flex-center">
                <img src="public/imgs/items/placeholder.png" alt="">
            </div>
            <div class="stock-text-con flex-center">
                <div class="stock-details">
                    <div class="stock-name">
                        <h5>Sinangag Premium</h5>
                    </div>
                    <div class="stock-type">
                        <h6>Drinks</h6>
                    </div>
                </div>
                <div class="stock-price">
                    <p>₱100.00</p>
                </div>
            </div>
            <div class="stock-btn flex-center">
                <button>Stocked</button>
            </div>
        </div>




        <div class="stock-card">
            <div class="stock-img flex-center">
                <img src="public/imgs/items/placeholder.png" alt="">
            </div>
            <div class="stock-text-con flex-center">
                <div class="stock-details">
                    <div class="stock-name">
                        <h5>Sinangag Premium</h5>
                    </div>
                    <div class="stock-type">
                        <h6>Drinks</h6>
                    </div>
                </div>
                <div class="stock-price">
                    <p>₱100.00</p>
                </div>
            </div>
            <div class="stock-btn flex-center">
                <button>Stocked</button>
            </div>
        </div>



        <div class="stock-card">
            <div class="stock-img flex-center">
                <img src="public/imgs/items/placeholder.png" alt="">
            </div>
            <div class="stock-text-con flex-center">
                <div class="stock-details">
                    <div class="stock-name">
                        <h5>Sinangag Premium</h5>
                    </div>
                    <div class="stock-type">
                        <h6>Drinks</h6>
                    </div>
                </div>
                <div class="stock-price">
                    <p>₱100.00</p>
                </div>
            </div>
            <div class="stock-btn flex-center">
                <button>Stocked</button>
            </div>
        </div>



        <div class="stock-card">
            <div class="stock-img flex-center">
                <img src="public/imgs/items/placeholder.png" alt="">
            </div>
            <div class="stock-text-con flex-center">
                <div class="stock-details">
                    <div class="stock-name">
                        <h5>Sinangag Premium</h5>
                    </div>
                    <div class="stock-type">
                        <h6>Drinks</h6>
                    </div>
                </div>
                <div class="stock-price">
                    <p>₱100.00</p>
                </div>
            </div>
            <div class="stock-btn flex-center">
                <button>Stocked</button>
            </div>
        </div>



        <div class="stock-card">
            <div class="stock-img flex-center">
                <img src="public/imgs/items/placeholder.png" alt="">
            </div>
            <div class="stock-text-con flex-center">
                <div class="stock-details">
                    <div class="stock-name">
                        <h5>Sinangag Premium</h5>
                    </div>
                    <div class="stock-type">
                        <h6>Drinks</h6>
                    </div>
                </div>
                <div class="stock-price">
                    <p>₱100.00</p>
                </div>
            </div>
            <div class="stock-btn flex-center">
                <button>Stocked</button>
            </div>
        </div>



        <div class="stock-card">
            <div class="stock-img flex-center">
                <img src="public/imgs/items/placeholder.png" alt="">
            </div>
            <div class="stock-text-con flex-center">
                <div class="stock-details">
                    <div class="stock-name">
                        <h5>Sinangag Premium</h5>
                    </div>
                    <div class="stock-type">
                        <h6>Drinks</h6>
                    </div>
                </div>
                <div class="stock-price">
                    <p>₱100.00</p>
                </div>
            </div>
            <div class="stock-btn flex-center">
                <button>Stocked</button>
            </div>
        </div>



        <div class="stock-card">
            <div class="stock-img flex-center">
                <img src="public/imgs/items/placeholder.png" alt="">
            </div>
            <div class="stock-text-con flex-center">
                <div class="stock-details">
                    <div class="stock-name">
                        <h5>Sinangag Premium</h5>
                    </div>
                    <div class="stock-type">
                        <h6>Drinks</h6>
                    </div>
                </div>
                <div class="stock-price">
                    <p>₱100.00</p>
                </div>
            </div>
            <div class="stock-btn flex-center">
                <button>Stocked</button>
            </div>
        </div>



        <div class="stock-card">
            <div class="stock-img flex-center">
                <img src="public/imgs/items/placeholder.png" alt="">
            </div>
            <div class="stock-text-con flex-center">
                <div class="stock-details">
                    <div class="stock-name">
                        <h5>Sinangag Premium</h5>
                    </div>
                    <div class="stock-type">
                        <h6>Drinks</h6>
                    </div>
                </div>
                <div class="stock-price">
                    <p>₱100.00</p>
                </div>
            </div>
            <div class="stock-btn flex-center">
                <button>Stocked</button>
            </div>
        </div>



        <div class="stock-card">
            <div class="stock-img flex-center">
                <img src="public/imgs/items/placeholder.png" alt="">
            </div>
            <div class="stock-text-con flex-center">
                <div class="stock-details">
                    <div class="stock-name">
                        <h5>Sinangag Premium</h5>
                    </div>
                    <div class="stock-type">
                        <h6>Drinks</h6>
                    </div>
                </div>
                <div class="stock-price">
                    <p>₱100.00</p>
                </div>
            </div>
            <div class="stock-btn flex-center">
                <button>Stocked</button>
            </div>
        </div>



        <div class="stock-card">
            <div class="stock-img flex-center">
                <img src="public/imgs/items/placeholder.png" alt="">
            </div>
            <div class="stock-text-con flex-center">
                <div class="stock-details">
                    <div class="stock-name">
                        <h5>Sinangag Premium</h5>
                    </div>
                    <div class="stock-type">
                        <h6>Drinks</h6>
                    </div>
                </div>
                <div class="stock-price">
                    <p>₱100.00</p>
                </div>
            </div>
            <div class="stock-btn flex-center">
                <button>Stocked</button>
            </div>
        </div>



        <div class="stock-card">
            <div class="stock-img flex-center">
                <img src="public/imgs/items/placeholder.png" alt="">
            </div>
            <div class="stock-text-con flex-center">
                <div class="stock-details">
                    <div class="stock-name">
                        <h5>Sinangag Premium</h5>
                    </div>
                    <div class="stock-type">
                        <h6>Drinks</h6>
                    </div>
                </div>
                <div class="stock-price">
                    <p>₱100.00</p>
                </div>
            </div>
            <div class="stock-btn flex-center">
                <button>Stocked</button>
            </div>
        </div>


        <div class="stock-card">
            <div class="stock-img flex-center">
                <img src="public/imgs/items/placeholder.png" alt="">
            </div>
            <div class="stock-text-con flex-center">
                <div class="stock-details">
                    <div class="stock-name">
                        <h5>Sinangag Premium</h5>
                    </div>
                    <div class="stock-type">
                        <h6>Drinks</h6>
                    </div>
                </div>
                <div class="stock-price">
                    <p>₱100.00</p>
                </div>
            </div>
            <div class="stock-btn flex-center">
                <button>Stocked</button>
            </div>
        </div>



        <div class="stock-card">
            <div class="stock-img flex-center">
                <img src="public/imgs/items/placeholder.png" alt="">
            </div>
            <div class="stock-text-con flex-center">
                <div class="stock-details">
                    <div class="stock-name">
                        <h5>Sinangag Premium</h5>
                    </div>
                    <div class="stock-type">
                        <h6>Drinks</h6>
                    </div>
                </div>
                <div class="stock-price">
                    <p>₱100.00</p>
                </div>
            </div>
            <div class="stock-btn flex-center">
                <button>Stocked</button>
            </div>
        </div>

    </div>



    <div id="admin-sales" class="flex-center hidden">


        <div class="admin-order">

            <div class="admin-order-header flex-center order">
                <div class="email">
                    Email
                </div>
                <div class="time">
                    Time Created
                </div>
                <div class="items">
                    Items
                </div>
                <div class="total">
                    Total
                </div>
                <div class="status">
                    Status
                </div>
            </div>


            <div class="order-item flex-center">
                <div class="flex-center order">
                    <div class="email">
                        joshyreps@gmail.com
                    </div>
                    <div class="time">
                        10/10/25 - 11:00pm
                    </div>
                    <div class="items">
                        5
                    </div>
                    <div class="total">
                        P100.00
                    </div>
                    <div class="status">
                        <button class="pending-color">
                            Pending
                        </button>
                    </div>
                </div>
                <div class="order-list flex-center">
                    Item's Bought :
                    <ul>
                        <li>
                            Cupcake x2
                        </li>
                        <li>
                            Cupcake x2
                        </li>
                        <li>
                            Cupcake x2
                        </li>
                        <li>
                            Cupcake x2
                        </li>
                        <li>
                            Cupcake x2
                        </li>
                    </ul>
                    <div class="items text flex-center">
                        <h5 class="label">No. Items:</h5>
                        <h5 class="value">5</h5>
                    </div>
                    <div class="values text flex-center">
                        <h4 class="label">Total:</h4>
                        <h4 class="value">P100.00</h4>
                    </div>
                </div>
            </div>



            <div class="order-item flex-center">
                <div class="flex-center order">
                    <div class="email">
                        joshyreps@gmail.com
                    </div>
                    <div class="time">
                        10/10/25 - 11:00pm
                    </div>
                    <div class="items">
                        5
                    </div>
                    <div class="total">
                        P100.00
                    </div>
                    <div class="status">
                        <button class="done-color">
                            Done
                        </button>
                    </div>
                </div>
                <div class="order-list flex-center">
                    Item's Bought :
                    <ul>
                        <li>
                            Cupcake x2
                        </li>
                        <li>
                            Cupcake x2
                        </li>
                        <li>
                            Cupcake x2
                        </li>
                        <li>
                            Cupcake x2
                        </li>
                        <li>
                            Cupcake x2
                        </li>
                    </ul>
                    <div class="items text flex-center">
                        <h5 class="label">No. Items:</h5>
                        <h5 class="value">5</h5>
                    </div>
                    <div class="values text flex-center">
                        <h4 class="label">Total:</h4>
                        <h4 class="value">P100.00</h4>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- <div id="admin-stocks" class="hidden">

    </div> -->


</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.js"></script>
<script src="public/js/script.js"></script>
<script>
    async function loadItems() {
        try {
            const res = await fetch("http://localhost:8090/api/items"); // adjust port if needed
            if (!res.ok) throw new Error(`HTTP Error: ${res.status}`);

            const data = await res.json();
            console.log("Items received:", data);

            const stockContainer = document.getElementById("admin-stock");
            stockContainer.innerHTML = "";

            data.forEach(item => {
                const isStocked = item.status === "stocked";

                const card = document.createElement("div");
                card.classList.add("stock-card");

                card.innerHTML = `
                    <div class="stock-img flex-center">
                        <img src="${item.imageUrl || 'public/imgs/items/placeholder.png'}" alt="">
                    </div>
                    <div class="stock-text-con flex-center">
                        <div class="stock-details">
                            <div class="stock-name">
                                <h5>${item.name}</h5>
                            </div>
                            <div class="stock-type">
                                <h6>${item.type}</h6>
                            </div>
                        </div>
                        <div class="stock-price">
                            <p>₱${item.price.toFixed(2)}</p>
                        </div>
                    </div>
                    <div class="stock-btn flex-center">
                        <button
                            class="${isStocked ? 'stock-color' : 'unstock-color'}"
                            data-id="${item.id}"
                            data-status="${item.status}"
                            onclick="toggleButton(this)">
                            ${isStocked ? 'Stocked' : 'Unstocked'}
                        </button>
                    </div>
                `;

                stockContainer.appendChild(card);
            });

        } catch (error) {
            console.error("Connection error:", error);
        }
    }

    async function toggleButton(btn) {
        const itemId = btn.getAttribute("data-id");
        const currentStatus = btn.getAttribute("data-status");
        const newStatus = currentStatus === "stocked" ? "unstocked" : "stocked";

        try {
            const res = await fetch(`http://localhost:8090/api/items/${itemId}/status`, {
                method: "PATCH",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ status: newStatus })
            });

            if (!res.ok) throw new Error(`Failed to update item ${itemId}`);
            const updatedItem = await res.json();
            console.log(" Updated item:", updatedItem);

            btn.textContent = newStatus === "stocked" ? "Stocked" : "Unstocked";
            btn.setAttribute("data-status", newStatus);
            btn.classList.toggle("stock-color");
            btn.classList.toggle("unstock-color");

        } catch (err) {
            console.error("Error updating item status:", err);
            alert("⚠️ Failed to update item status. Please try again later.");
        }
    }

    document.addEventListener("DOMContentLoaded", loadItems);
</script>

</body>

</html>